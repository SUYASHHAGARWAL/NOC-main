<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="/Static/Dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>
<style>
    #form2 {
        display: none;
    }

    #form3 {
        display: none;
    }

    /* Default styles for sidebar */
    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 5.9rem;
        height: 100vh;
        padding: 0 1.7rem;
        color: white;
        overflow: hidden;
        transition: all 0.5s linear;
        background: rgba(113, 99, 186, 255);
        z-index: 1000;
    }

    /* Styles for sidebar items */
    .sidebar ul.items {
        list-style: none;
        padding: 0;
    }

    .sidebar ul.items li {
        padding: 10px;
        border-bottom: 1px solid #555;
        /* Adjust border color as needed */
    }

    .sidebar ul.items li:last-child {
        border-bottom: none;
    }

    .sidebar ul.items li a {
        color: #fff;
        /* Adjust text color as needed */
        text-decoration: none;
    }

    /* Hamburger icon styles */
    .toggle-btn {
    position: fixed;
    top: 20px;
    left: 20px;
    cursor: pointer;
    z-index: 1001;
    /* Ensure above sidebar */
    color: #fff;
    /* Adjust color as needed */
    transition: margin-left 0.5s ease, margin-top 0.5s ease; /* Add transition properties */
}
.toggle-btn {
    display: none; /* Hide toggle button by default */
}
footer {
    position: fixed;
    bottom: 0;
    width: 100%;
    background-color: #426c35;
    color: #fff;
    text-align: center;
    padding: 20px 0;
}

/* Media query for smaller screens */
@media (max-width: 768px) {
    footer {
        position: fixed; /* Keep the position fixed */
        bottom: 0; /* Position at the bottom of the viewport */
        width: 100%; /* Take up full width */
        padding: 10px 0; /* Reduce padding for smaller screens */
        font-size: 14px; /* Adjust font size for smaller screens */
    }
}
    .highlight {
        color: #ff0; /* Yellow color */
        font-weight: bold;
    }
/* Media query for smaller screens */
@media (max-width: 768px) {
    .toggle-btn {
        display: block; /* Show toggle button for mobile screens */
    }
}

    @media (min-width: 768px) {
        .kakeji {
            height: 100%;
        }

        .kake1 {
            max-width: 45%;
        }
    }

    /* Media query for smaller screens */
    @media (max-width: 768px) {
        .sidebar {
            transform: translateX(-100%);
        }

        /* Show sidebar when active class is added */
        .sidebar.active {
            transform: translateX(0);
        }
    }


    /* Media query for smaller screens */
    /* Media query for smaller screens */
    @media (max-width: 768px) {
        .main--content {
            margin-left: 0;
        }

        .sidebar {
            transform: translateX(-100%);
        }

        /* Show sidebar when active class is added */
        .sidebar.active {
            transform: translateX(0);
        }

        .main--content {
            width: 100%;
            /* Take up full width */
            height: calc(100vh - 3.5rem);
            /* Take up full height minus the height of the header */
            padding-top: 3.5rem;
            /* Height of the header */
        }

        .modal-content {
            margin-left: 0px;
            flex-wrap: wrap;

        }

        .randomclass {
            flex-wrap: wrap;
        }
    }

    .sidebar.open {
        transform: translateX(0);
    }

    @media (max-width: 1000px) {
        .modal-content {
            margin-left: 0px;
        }
    }
    .logoutbtnclr{
        background-color: rgba(113, 99, 186, 255);
        color: white;
    }
    .popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 800px;
    max-height: 80%;
    overflow-y: auto;
    background-color: #ffffff;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    z-index: 9999;
}

.innerbox {
    padding: 20px;
    position: relative;
}

.close {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 20px;
    cursor: pointer;
}

.close:hover {
    color: red;
}

.form-row {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.form-column {
    flex: 1;
}
.form-row {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.form-column {
    flex: 1;
    min-width: 45%; /* Adjust as needed */
}

.custom-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 800px;
        max-height: 80%;
        overflow-y: auto;
        background-color: #ffffff;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        z-index: 9999;
    }

    .custom-innerbox {
        padding: 20px;
        position: relative;
    }

    .custom-close {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 20px;
        cursor: pointer;
    }

    .custom-close:hover {
        color: red;
    }

    .custom-form-row {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }

    .custom-form-column {
        flex: 1;
        min-width: 45%; /* Adjust as needed */
    }
</style>

<body>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            var nodform = document.getElementById('noc-modala')
            var ggform = document.getElementById('exitsurvey')
            ggform.addEventListener('click', function(event) {
                nodform.style.display = 'flex';
            })
        })
    </script>
    <script>


var Newdata = {}
var idx = -1;

function Editpopup(i) {
    idx = i;
    const popup = document.getElementById('popup');
    const record = Newdata[i]; 
    console.log(record)
    console.log(record.companyname)
    document.getElementById('enrrr').value = record.EnrollmentId;
    document.getElementById('enrrr').setAttribute('placeholder', record.EnrollmentId);
    
    document.getElementById('naaam').value = record.Name;
    document.getElementById('naaam').setAttribute('placeholder', record.Name);

    document.getElementById('cmpnm').value = record.Company;
    document.getElementById('cmpnm').setAttribute('placeholder', record.Company);
    
    document.getElementById('lcnn').value = record.location;
    document.getElementById('lcnn').setAttribute('placeholder', record.location);
    
    document.getElementById('drsn').value = record.duration;
    document.getElementById('drsn').setAttribute('placeholder', record.duration);
    
    document.getElementById('name_rcvr').value = record.name_reciever;
    document.getElementById('name_rcvr').setAttribute('placeholder', record.name_reciever);
    
    document.getElementById('dsn_rcvr').value = record.Designation_reciever;
    document.getElementById('dsn_rcvr').setAttribute('placeholder', record.Designation_reciever);
    
    document.getElementById('strtdt').value = record.startDate;
    document.getElementById('strtdt').setAttribute('placeholder', record.startDate);
    
    document.getElementById('enddt').value = record.endDate;
    document.getElementById('enddt').setAttribute('placeholder', record.endDate);
    
    document.getElementById('addorg').value = record.org_address;
    document.getElementById('addorg').setAttribute('placeholder', record.org_address);
    
    document.getElementById('idbb').value = record.id;
    
    popup.style.display = 'block';
}



$(document).ready(function () {
        document.querySelector('.toggle-btn').addEventListener('click', function () {
            document.querySelector('.sidebar').classList.toggle('open');
            if (document.querySelector('.sidebar').classList.contains('open')) {
                document.querySelector('.toggle-btn').style.marginLeft = '4.1rem';
                document.querySelector('.toggle-btn').style.marginTop = '-1rem';
            } else {
                document.querySelector('.toggle-btn').style.marginLeft = ''; // reset marginLeft
                document.querySelector('.toggle-btn').style.marginTop = ''; // reset marginTop
            }
        });

            $('#checkpreviousapplications').click(function () {
                console.log(121)
                $.getJSON('/api/checkstdprevapp?EnrollmentId={{record.EnrollmentId}}', function (data) {
                    console.log(data)
                    console.log(data.length)
                    Newdata = data
                    $('#section-display').css('display', 'block')
                    $('#myTable').css('display', 'block')
                    $("#tablebody2").html('')

                    $('#lamand').html(`
                            <tr>
                                <th>S. no</th>
                                <th>Enrollment</th>
                                <th>Dept</th>
                                <th>Dept. A</th>
                                <th>Tnp. A</th>
                                <th>Tnp. C</th>
                                <th>App. Date</th>
                                <th>Company</th>
                                <th>Reciever Name</th>
                                <th>Reciever Designation</th>
                                <th>Duration (In days)</th>
                                <th>Start date</th>
                                <th>Give Feedback</th>
                                <th>Edit Application</th>
                            </tr>`)

                    for (i = 0; i < data.length; i++) {
                        let fillFormLink = ''; // Initialize an empty string for the link
                        if (data[i].TnP_approval === 'Approved') {
                            fillFormLink = `<a href="/api/Fedbackform?id=${data[i].id}">Fill Form</a>`;
                        }
                        $('#tablebody2').append(`<tr>
                            <th scope="row">${i + 1}</th>
                            <td>${data[i].EnrollmentId}</td>
                            <td>{{branchstud}}</td>
                            <td>${data[i].Dept_approval}</td>
                            <td>${data[i].TnP_approval}</td>
                            <td>${data[i].TnP_Comment}</td>
                            <td>${data[i].App_Date}</td>
                            <td>${data[i].Company}</td>
                            <td>${data[i].name_reciever}</td>
                            <td>${data[i].Designation_reciever}</td>
                            <td>${data[i].duration}</td>
                            <td>${data[i].startDate}</td>
                            <td>${fillFormLink}</td>
                            <td>${data[i].allow_edit ?`<button onclick="Editpopup('${i}')">Edit</button>`: 'Not allowed'}</td>
                        </tr>`);
                    }
                })
            })
            $('#noduesstatus').click(function () {
                console.log(121);
                $.getJSON('/api/Noduesstatus?EnrollmentId={{record.EnrollmentId}}', function (data) {
                    console.log(data);

                    $('#section-display').css('display', 'block');
                    $("#tablebody2").html('');

                    // Assuming data has only one record
                    $('#tablebody2').append(`<tr>
            <td>${data.EnrollmentId}</td>
            <td>${data.Name}</td>
            <td>${data.Email}</td>
            <td>${data.Dept_approval}</td>
            <td>${data.Dept_Comment}</td>
            <td>${data.TnP_approval}</td>
            <td>${data.TnP_Comment}</td>
            <td>${data.Company}</td>
            <td>${data.Role}</td>
            <td>${data.App_Date}</td>
            <td>${data.App_time}</td>
        </tr>`);
                });
            });

      


        $('#bonafstatus').click(function () {
                console.log(121)
                $.getJSON('/api/bonafstatus?EnrollmentId={{record.EnrollmentId}}', function (data) {
                    console.log(data)
                    console.log(data.length)
                    Newdata = data
                    $('#section-display').css('display', 'block')
                    $('#myTable').css('display', 'block')
                    $("#tablebody2").html('')

                    $('#lamand').html(`
                            <tr>
                                <th>S. no</th>
                                <th>Enrollment</th>
                                <th>Dept</th>
                                <th>Dept. A</th>
                                <th>App. Date</th>
                                <th>Semester & year</th>
                                <th>Session</th>
                            </tr>`)

                    for (i = 0; i < data.length; i++) {                        
                        $('#tablebody2').append(`<tr>
                            <th scope="row">${i + 1}</th>
                            <td>${data[i].EnrollmentId}</td>
                            <td>{{branchstud}}</td>
                            <td>${data[i].dept_approval}</td>
                            <td>${data[i].application_date}</td>
                            <td>${data[i].Semester}</td>
                            <td>${data[i].session}</td>`);
                    }
                })
            });
        })
    </script>



    <div class="sidebar-container">
        <button class="toggle-btn" style="color: black; background: transparent;width:40px;">&#9776;</button>
        <div class="sidebar">
            <ul class="items">
                <li class="active">
                    <a href="">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="/api/studentprofile" id="profile-link">
                        <i class="fas fa-user"></i>
                        <span>Profile</span>
                    </a>

                </li>
                <li>
                    <a target="_blank" href="http://moodle.mitsgwalior.in/" class="mat">
                        <i class="material-icons">assignment</i>
                        <span>Moodle</span>
                    </a>
                </li>
                <li>
                    <a target="_blank" href="https://web.mitsgwalior.in/" class="mat">
                        <i class="material-icons">notes</i>
                        <span>MITS Gwalior</span>
                    </a>
                </li>
                <li>
                    <a target="_blank" href="/api/companydata" class="mat">
                        <i class="material-icons">computer</i>
                        <span>Companies</span>
                    </a>
                </li>
                <li>
                    <a href="/api/show_feedback" class="mat">
                        <i class="material-icons">computer</i>
                        <span>FeedBacks</span>
                    </a>
                </li>

                <li class="logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span><a href="{% url 'logout' %}">Logout</a>
                    </span>

                </li>
            </ul>
        </div>
    </div>

    <div class="main--content">
        <div class="header-wrapper">
            <div class="header-title">
                <span>Student Dashboard</span>
                <h2>{{record.EnrollmentId}} {{record.Name}}</h2>
            </div>
            <div class="user-info">

                <img src="/Static/Images/mitslogo.png" style=" width: 8rem; height: 8rem;" alt="">
                <!-- <img src="./biotic_logo.png" alt=""> -->
            </div>
        </div>
        <div class="card-container">
            <h3 class="main-title">Student's Section</h3>
            <div class="card-wrapper">

                <div id="btnapply"><button type="button" class="btn flex items-center box centerAlign ">Apply For
                        NOC</button></div>

                <button id="checkpreviousapplications" type="button"
                    class="btn flex items-center box centerAlign ">Check NOC Status</button>


                <button id="exitsurvey" type="button" class="btn flex items-center box centerAlign ">Exit Survey</button>

                <button id="noduesstatus" type="button" class="btn flex items-center box centerAlign ">Check No Dues
                    Status</button>

                <button id="bonafapply" type="button" class="btn flex items-center box centerAlign ">Apply for Bonafide</button>

                <button id="bonafstatus" type="button" class="btn flex items-center box centerAlign ">Check Bonafide Status</button>


            </div>
        </div>




        

        <div class="tabular-wrapper">
            <h3 id="datawillappear" class="main-title">NOC Data</h3>
            <div class="table-container" style="overflow-x: auto; ">
                <table id="myTable" style="overflow-y: auto; display: none;">
                    <thead id="lamand">
                        <tr>
                            <th>S. no</th>
                            <th>Enrollment</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Dept. A</th>
                            <th>Dept. C</th>
                            <th>Company</th>
                            <th>App. Date</th>
                            <th>App. Time</th>
                            <th>Reciever Name</th>
                            <th>Reciever Designation</th>
                            <th>Applied through</th>
                            <th>Duration</th>
                            <th>Start date</th>
                            <th>End date</th>
                            <th>Stipend</th>
                            <th>Offer Letter</th>
                            <th>Company website</th>
                            <th>year of study</th>

                            <th>Action</th>
                        </tr>
                    </thead>

                    <tbody id="tablebody2">


                    </tbody>
                    <tbody id="tablebody3">
                    </tbody>

                    <tbody id="tablebody4">
                    </tbody>

                    <tbody id="tablebody5">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="profile-modala" style="overflow: auto; align-items: start; justify-content: center;" class="modala">
        <div class="modal-content">
            <span class="closea" style="display: flex; align-items: center; justify-content: end;">&times;</span>
            <h3>Form for NOC</h3>
            <div>
                <div class="applyform" style="overflow-y: scroll;">
                    <form method="post" enctype="multipart/form-data" action="/api/submitapplication">{% csrf_token %}



                        <div id="form1">

                            <div style="display: flex; flex-wrap: wrap; gap: 1rem;">
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="EnrollmentId">Enrollment Id</label>
                                    <input readonly class="filledornot" type="text" id="EnrollmentId"
                                        name="EnrollmentId" placeholder="{{record.EnrollmentId}}"
                                        value="{{record.EnrollmentId}}">
                                </div>
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="name">Name</label>
                                    <input readonly class="filledornot" type="text" id="name" name="name"
                                        placeholder="{{record.Name}}" value="{{record.Name}}">
                                </div>
                                <input type="text" id="Email" hidden name="Email" placeholder="{{record.Email}}"
                                    value="{{record.Email}}">
                                <input type="text" id="Branch" hidden name="department" placeholder="record.Branch"
                                    value="{{record.Branch}}">
                                <!-- <div style="flex: 1; min-width: 45%;">
                                    <label for="Email">EmailId</label>
                                    <input type="text" id="Email" name="Email" placeholder="{{record.Email}}"
                                        value="{{record.Email}}">
                                </div>
                                <div style="flex: 1; min-width: 45%;">
                                    <label for="Branch">Department</label>
                                    <input type="text" id="Branch" name="department" placeholder="record.Branch"
                                        value="{{record.Branch}}">
                                </div> -->
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="year">Studying in Year</label>
                                    <select id="year" name="year">
                                        <option value=''>select year</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                </div>

                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="companyname">Industry/Company Name</label>
                                    <input class="filledornot" type="text" id="companyname" name="companyname"
                                        placeholder="Company Name" value="{{record.companyname}}">
                                </div>
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="companyname">Location of Company</label>
                                    <input class="filledornot" type="text" id="location" name="location"
                                        placeholder="Location" value="{{record.companyname}}">
                                </div>
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="companyname">Internship Duration in Days</label>
                                    <input class="filledornot" type="number" min="0" id="duration" name="duration"
                                        placeholder="in days" value="{{record.companyname}}">
                                </div>
                                <div class="randomclass"
                                    style="display: flex; align-items: center; justify-content: space-between; ">
                                    <div class="kake1" style="display: flex; flex-direction: column; min-width: 45%;">
                                        <label for="companyname">Name of person recieving NOC in company. (If sending to
                                            company leave blank). (Ex: Mr. Vikar Singh)</label>
                                        <input class="filledornot" type="text" id="name_reciever" name="name_reciever"
                                            placeholder="Mr. Vikas Singh (Exapmple name)"
                                            value="{{record.companyname}}">
                                    </div>
                                    <div class="kakeji"
                                        style="display: flex; flex-direction: column; min-width: 45%;  align-items: end; justify-content: space-between;">
                                        <label for="companyname">Designation of person recieving NOC. (ex: HR manager/
                                            HR Team/ CEO)</label>
                                        <input class="filledornot" type="text" id="Designation_reciever"
                                            name="Designation_reciever" placeholder="HR Manager/ HR team"
                                            value="{{record.companyname}}">
                                    </div>
                                </div>
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="startDate">Start Date</label>
                                    <input type="date" id="startDate" class="filledornot" name="startDate" value="{{record.startDate}}">
                                </div>
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="endDate">End Date</label>
                                    <input type="date" id="endDate" class="filledornot" name="endDate" value="{{record.endDate}}">
                                </div>
                            </div>
                            <input type="button" id="btnform1" class="btn flex items-center box centerAlign"
                                value="Next">
                        </div>

                        <div id="form2">

                            <div style="display: flex; flex-wrap: wrap; gap: 15px;">


                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="companyname">Complete Address of Organisation</label>
                                    <input type="text" id="org_address" name="org_address"
                                        placeholder="Complete Organisation Address" value="{{record.companyname}}">
                                </div>
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="companyname">Organisation Website Url</label>
                                    <input type="text" id="websitr_org" name="websitr_org" placeholder="Company website"
                                        value="{{record.companyname}}">
                                </div>
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="companyname">Applying through</label>
                                    <select id="apply_through" name="apply_through">
                                        <option value="employee_referral">Employee Referral</option>
                                        <option value="organisation_website">Organisation Website</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="companyname">Stipend (Monthly)</label>
                                    <label for="companyname">(If Any)</label>
                                    <input type="number" min="0" id="stipend" name="stipend" placeholder="in numbers "
                                        value="">
                                </div>

                                <div style="display: flex; flex-direction: column; min-width: 45%;">
                                    <label for="offerletter">Internship offer letter (if any)</label><br>
                                    <input type="file" id="offerletter" name="offerletter" accept=".pdf">
                                    <small>(Accepted formats: PDF)</small>
                                </div>



                                <div
                                    style="display: flex; flex-direction: column; min-width: 100%; margin-top: 0.5rem;">
                                    <label>
                                        <input type="checkbox" id="declaration" name="declaration">
                                        I hereby declare that all the details submitted by me are correct, and I shall
                                        be responsible for any kind of data mismatch or rejection.
                                    </label>
                                </div>

                                <input type="button" id="prevbtn1" class="btn flex items-center box centerAlign"
                                    value="previous">

                            </div>

                            <input type="submit" class="btn flex items-center box centerAlign" value="Submit">

                        </div>




                </div>
                </form>
            </div>
        </div>
    </div>
    </div>




    

    <div id="noc-modala" class="modala" style="display: none; justify-content: center;">
        <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
            <span class="closer">&times;</span>
            <h3>Exit Survey</h3>
            <h4>Kindly check details before hitting submit</h4>
            <div>
                <div class="applyform">
                    <form method="post" action="/api/submitnoduesapp">
                        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                            <!-- Existing fields -->
                            <div style="display: flex; flex-direction: column;">
                                <label for="name">Name</label>
                                <input readonly required type="text" id="name" name="name" placeholder="{{record.Name}}" value="{{record.Name}}">
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="EnrollmentId">Enrollment Id</label>
                                <input type="text" id="EnrollmentId" name="EnrollmentId" placeholder="{{record.EnrollmentId}}" value="{{record.EnrollmentId}}">
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="Email">Email Id</label>
                                <input type="text" id="Email" name="Email" placeholder="{{record.Email}}" value="{{record.Email}}">
                            </div>
                            <input type="text" id="Branch" name="department" placeholder="record.Branch" hidden value="{{record.Branch}}">
                            <div style="display: flex; flex-direction: column;">
                                <label for="mobile">Phone</label>
                                <input type="text" id="mobile" name="mobile" placeholder="record.contact_Num" value="{{record.contact_Num}}">
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="apply">Applying for No Dues</label>
                                <input type="text" id="apply" name="apply" placeholder="Yes" value="Yes">
                            </div>
                            <!-- New fields -->
                            <div style="display: flex; flex-direction: column;">
                                <label for="dob">Date of Birth</label>
                                <input type="date" id="dob" name="dob" required>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="gender">Gender</label>
                                <select id="gender" name="gender" required>
                                    <option value="" disabled selected>Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="course">Course (e.g., Btech)</label>
                                <input type="text" id="course" name="course" placeholder="e.g., Btech" required>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="branch">Branch</label>
                                <input type="text" id="branch" name="branch" placeholder="e.g., Computer Science" required>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="rate_faculty">Rate the Faculty Teaching Approach in the UG or PG Programs</label>
                                <input type="number" id="rate_faculty" name="rate_faculty" min="1" max="10" placeholder="Rate out of 10" required>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="teaching_methods">How were the teaching methods of faculty?</label>
                                <textarea id="teaching_methods" name="teaching_methods" placeholder="Describe the teaching methods" rows="3" required></textarea>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="learning_resources">How was the usage of Learning and Technological Resources?</label>
                                <textarea id="learning_resources" name="learning_resources" placeholder="Describe the usage of resources" rows="3" required></textarea>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="syllabus_completion">The full Syllabus of courses was completed?</label>
                                <textarea id="syllabus_completion" name="syllabus_completion" placeholder="Describe the syllabus completion" rows="3" required></textarea>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="course_relevance">Relevance of Course curriculum to Your Career Goals</label>
                                <textarea id="course_relevance" name="course_relevance" placeholder="Describe the relevance" rows="3" required></textarea>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="teacher_preparedness">How was the teachers preparedness and communication?</label>
                                <textarea id="teacher_preparedness" name="teacher_preparedness" placeholder="Describe the preparedness and communication" rows="3" required></textarea>
                            </div>
                            <div style="display: flex; flex-direction: column;">
                                <label for="course_outcomes">Does Faculty communicate to you about Course Outcomes?</label>
                                <textarea id="course_outcomes" name="course_outcomes" placeholder="Describe the communication about outcomes" rows="3" required></textarea>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 20px;">
                            <input type="submit" class="btn flex items-center box centerAlign" value="Submit">
                        </div>
                        <div id="check" value="{{check}}" hidden></div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <input type="text" name="" id="msgss" value="{{message}}" hidden>


    <div class="popup" id="popup" style="display: none;">
        <div class="innerbox">
            <span class="close" onclick="closePopup()">&times;</span> <!-- Cross button -->
            <h1>Edit Data</h1>
            <form method="post" enctype="multipart/form-data" action="/api/editAppNocStud">
                {% csrf_token %}
                <div class="form-row">
                    <div class="form-column">
                        <label for="EnrollmentId">Enrollment Id</label>
                        <input readonly  type="text" id="enrrr" name="EnrollmentId" >
                    </div>
                    <div class="form-column">
                        <label for="name">Name</label>
                        <input readonly  type="text" id="naaam" name="name">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-column">
                        <label for="name_reciever">Name of person receiving NOC in company</label>
                        <input  type="text" id="name_rcvr" name="name_reciever" >
                    </div>
                    <div class="form-column">
                        <label for="Designation_reciever">Designation of person receiving NOC</label>
                        <input  type="text" id="dsn_rcvr" name="Designation_reciever"">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-column">
                        <label for="org_address">Complete Address of Organisation</label>
                        <input type="text" id="addorg" name="org_address" >
                    </div>
                    <div class="form-column">
                        <label for="companyname">Company Name</label>
                        <input  type="text" id="cmpnm" name="companyname">
                    </div>
                </div>
            
                <div class="form-row">
                    <div class="form-column">
                        <label for="location">Location of Company</label>
                        <input  type="text" id="lcnn" name="location" >
                    </div>
                    <div class="form-column">
                        <label for="duration">Internship Duration in Days</label>
                        <input  type="number" min="0" id="drsn" name="duration" >
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-column">
                        <label for="startDate">Start Date</label>
                        <input type="date" id="strtdt"  name="startDate" >
                    </div>
                    <div class="form-column">
                        <label for="endDate">End Date</label>
                        <input type="date" id="enddt"  name="endDate" >
                    </div>
                </div>
                
                
                <input type="text" name="idbb" id="idbb"  hidden>

                <input type="submit" class="btn flex items-center box centerAlign" value="Submit">
            </form>
        </div>
    </div>


    <div id="popupForm" class="custom-popup bonafapply" style="display: none;">
        <div class="custom-innerbox">
            <form method="post" enctype="multipart/form-data" action="/api/ApplyBonafied">{% csrf_token %}
                <div class="custom-form-row">
                    <div class="custom-form-column">
                        <label for="studentName">Student Name:</label>
                        <input type="text" readonly id="student_name" name="student_name" placeholder="{{record.Name}}" value="{{record.Name}}">
                    </div> 
                    <div class="custom-form-column">
                        <label for="studentID">Enrollment Id</label>
                        <input type="text" readonly id="EnrollmentId" name="EnrollmentId" placeholder="{{record.EnrollmentId}}" value="{{record.EnrollmentId}}">
                    </div>
                </div>
                <div class="custom-form-row">
                    <div class="custom-form-column">
                        <label for="fatherName">Father's Name:</label>
                        <input type="text" id="fathers_name" name="fathers_name" placeholder="{{record.fathers_name}}" value="{{record.fathers_name}}">
                    </div>
                    <div class="custom-form-column">
                        <label for="semester">Semester</label>
                        <select id="Semester" name="Semester">
                            <option value="">select</option>
                            <option value="Year 1st Semester 1st">Year 1st Semester 1st</option>
                            <option value="Year 1st Semester 2nd">Year 1st Semester 2nd</option>
                            <option value="Year 2nd Semester 3rd">Year 2nd Semester 3rd</option>
                            <option value="Year 2nd Semester 4th">Year 2nd Semester 4th</option>
                            <option value="Year 3rd Semester 5th">Year 3rd Semester 5th</option>
                            <option value="Year 3rd Semester 6th">Year 3rd Semester 6th</option>
                            <option value="Year 4th Semester 7th">Year 4th Semester 7th</option>
                            <option value="Year 4th Semester 8th">Year 4th Semester 8th</option>
                        </select>
                    </div>
                </div>
                <div class="custom-form-row">
                    <div class="custom-form-column">
                        <label for="email">Email Address:</label>
                        <input type="text" readonly id="email" name="email" placeholder="{{record.Email}}" value="{{record.Email}}">
                    </div>
                    <div class="custom-form-column">
                        <label for="session">Session:</label>
                        <input type="text" id="session" name="session">
                    </div> 
                </div>
                <!-- Add more fields as needed -->
                <input type="text" id="Branch" hidden name="Branch" value="{{record.Branch}}">
                <!-- Submit button to submit the application -->
                <input type="submit" class="btn flex items-center box centerAlign" value="Submit">
            </form>
            <!-- Close button for the popup -->
            <span class="custom-close" onclick="closePopupForm()">×</span>
        </div>
    </div>
    

    <!-- <footer>
        <p>Copyright &copy; 2024 <span class="highlight">SDC MITS</span>. All Rights Reserved.</p>
    </footer> -->
    <script src="/Static/dashboard.js"></script>
    <script>
          function closePopup() {
        document.getElementById("popup").style.display = "none";
    }
    function closePopupForm() {
        document.getElementById("popupForm").style.display = "none";
    }
    
    // JavaScript to show the popup form when the button is clicked
    var bonafapplyButton = document.getElementById("bonafapply");
    var popupForm = document.getElementById("popupForm");

    bonafapplyButton.addEventListener("click", function() {
        popupForm.style.display = "block";
    });
    </script>
    <script>


        let msg = document.getElementById('msgss').value
        if (msg == 'ok') {
    Swal.fire({
        title: "Applied Succesfully. ",
        showDenyButton: false,
        showCancelButton: true,
        confirmButtonText: "Return to Dashboard",
        cancelButtonText: 'LogOut',
        cancelButtonHtml: true,
    }).then((result) => {
        if (result.isConfirmed) {
            window.location.href = "/api/studentlogin";
        } else if (result.dismiss === Swal.DismissReason.cancel) {
            window.location.href = "/"; 
        }
    });
}

        else if (msg == 'error')
            Swal.fire({
                title: "FeedBack Already Given.",
                showDenyButton: false,
                showCancelButton: false,
                confirmButtonText: "Return to Dashboard",
            }).then((result) => {
                /* Read more about isConfirmed, isDenied below */
                if (result.isConfirmed) {
                    window.location.href = "/api/studentlogin";
                }
            })
    </script>
    <script>
         document.querySelector('.closer').addEventListener('click', function() {
            document.getElementById('noc-modala').style.display = 'none';
        });
        var myDiv = document.getElementById('check');
        var content = myDiv.getAttribute('value')
        console.log(content)
        var myButton = document.getElementById('noduesstatus');
        var myBtn2 = document.getElementById('exitsurvey');
        if (content != 1) {

            myButton.style.display = 'none';
            myBtn2.style.display = 'none';
        }

        var form1 = document.getElementById('form1')
        var form2 = document.getElementById('form2')
        var form3 = document.getElementById('form3')
        var nextbtn1 = document.getElementById('btnform1')
        var prev = document.getElementById('prevbtn1')
        var pageoneitem = document.getElementsByClassName("filledornot")
        var dec = document.getElementById("declaration")

        nextbtn1.addEventListener('click', function () {
            console.log('Button clicked!');
            for (i = 0; i < pageoneitem.length; i++) {
                if (pageoneitem[i].value == '') {
                    console.log(pageoneitem[i])
                    alert("Fill all the fields" )
                    return
                }
            }
            var startDate = new Date(document.getElementById('startDate').value);
            var endDate = new Date(document.getElementById('endDate').value);

            if (startDate > endDate) {
                alert("End sate should be after Start date")
                return false; // Prevent form submission
            }
            form1.style.display = 'none';
            form2.style.display = 'block';
        });

        prev.addEventListener('click', function () {
            console.log('prev clicked!');
            form2.style.display = 'none';
            form1.style.display = 'block';
        });

        function redirectToProfile(enrollmentId) {
            // Construct the URL with the enrollmentId
            var profileUrl = '/api/studentprofile?EnrollmentId=' + encodeURIComponent(enrollmentId);

            // Redirect the user to the profile URL
            window.location.href = profileUrl;
        }
    </script>
</body>

</html>